{% extends 'base.html' %}

{% block title %}Slot Machine{% endblock %}

{% block content %}

<div class="container" style="margin-top: 50px; height:750px width:100%">
    <div class="row flew-column" style="height:750px; margin-left: 10%">
        {% for reel in reels %}
            <div class="reel-container" align="center">
                <div class="col h-100 reel" id="reel{{ reel }}">
                    {% for i in range(1, 241) %}
                        {% set index = ((loop.index0 + 20) % 20) + 1 %}
                        <img src="{{ url_for('static', filename=reels[reel]['symbol_' ~ index]['image_url']) }}">
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>
<div align="center">
    <button class="btn btn-primary" onclick="startSlotMachine()">Start</button>
</div>
<style>
    .reel-container {
        height: 750px; /* Adjust the height of the reel container as needed */
        overflow: hidden;
        border: 1px solid #ccc; /* Add border for better visualization */
    }

    .reel {
        display: flex;
        flex-direction: column;
        animation-name: slide;
        animation-duration: 10s;
        animation-timing-function: cubic-bezier(0.1, 0.65, 0.1, 1);
        animation-iteration-count: infinite;
    }

    @keyframes slide {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(-100%);
        }
    }

    .symbol {
        width: 100%;
        height: 150px;
        margin-bottom: 2px; /* Adjust the margin between symbols */
    }
</style>
<script>
function startSlotMachine() {
    // Start sliding animation for each reel
    for (let i = 1; i <= 5; i++) {
        slideReel('reel' + i);
    }
}

function slideReel(reelId) {
    const reel = document.getElementById(reelId);
    reel.style.animation = 'none'; // Reset animation
    reel.offsetHeight; // Trigger reflow
    reel.style.animation = null; // Start animation
}
</script>

{% endblock %}
